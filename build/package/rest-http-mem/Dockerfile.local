FROM golang:1.18-alpine3.15
WORKDIR /go/src/github.com/Haraj-backend/hex-pokebattle

COPY go.mod go.sum ./
RUN go mod download

COPY ./cmd ./cmd
COPY ./build ./build
COPY ./internal ./internal

RUN go install github.com/cosmtrek/air@v1.27.3
RUN mkdir -p tmp

COPY ./cmd/web/dist /dist

ENTRYPOINT ["air", "-c", "build/package/rest-http-mem/.air.toml"]
